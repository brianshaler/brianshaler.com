.cube-container
  position: absolute
  left: 50%
  top: 50%
  transform-style: preserve-3d
  transform-origin: 0 0
  perspective: 400px
  transition: all 1s ease
  .cube-holder
    transition: all 1s ease
    transform-style: preserve-3d
  .cube-holder.selected
    transform: translate3d(0, 0, -100px)
  .cube
    position: absolute
    animation-name: spin-left
    animation-duration: 1s
    animation-iteration-count: 1
    transform-style: preserve-3d
    .face
      position: absolute
      width: 200px
      height: 200px
      transform-style: preserve-3d
      border: solid 1px rgba(0,0,0,0.2)
      background-color: rgba(233,233,233,0.5)
      transform-origin: 0 0
      text-align: center
      overflow: hidden
      .xscrollable
        overflow-x: none
        overflow-y: scroll
        height: 100%
        max-height: 100%
    .face.selected
      background-color: rgba(255,255,255,0.6)
    .front
      transform: rotateY(0deg) translate3d(-50%, -50%, 100px)
    .left
      transform: rotateY(-90deg) translate3d(-50%, -50%, 100px)
    .right
      transform: rotateY(90deg) translate3d(-50%, -50%, 100px)
    .back
      transform: rotateY(180deg) translate3d(-50%, -50%, 100px)

.cube-container.selected
  .face
    opacity: 0
.cube-container.selected
  .face.selected
    opacity: 1
.cube-container
  .face
    opacity: 1

vendor(prop, args)
  -webkit-{prop} args
  -moz-{prop} args
  {prop} args

for w in 2 3 4 5 6 7 8
  min = 1px * w
  max = min + 1px
  factor = 16
  size = 64
  minWidth = min * min * factor
  maxWidth = max * max * factor
  if w < 3
    minWidth = 0px
  if w > 7
    maxWidth = 99999px
  
  unquote("@media (min-width: " + minWidth + ") and (max-width: " + maxWidth + ") {")
  radius = 1px * minWidth * 0.2
  diameter = radius*2
  perspective = diameter*3
  body
    font-size radius * 0.3
  .cube-container
    vendor('perspective', perspective)
    .cube
      .face
        width: diameter
        height: diameter
        .xscrollable
          height: diameter
      .front
        vendor('transform', rotateY(0deg) translate3d(-50%, -50%, radius))
      .left
        vendor('transform', rotateY(-90deg) translate3d(-50%, -50%, radius))
      .right
        vendor('transform', rotateY(90deg) translate3d(-50%, -50%, radius))
      .back
        vendor('transform', rotateY(180deg) translate3d(-50%, -50%, radius))
  .cube-container.selected
    vendor('perspective', perspective*10)
  unquote("}")

@keyframes spin-left
  0%
    transform: rotateY(0deg)
  90%
    transform: rotateY(100deg)
  100%
    transform: rotateY(90deg)

@keyframes spin-right
  0%
    transform: rotateY(0deg)
  90%
    transform: rotateY(100deg)
  100%
    transform: rotateY(90deg)
